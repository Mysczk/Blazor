<div class="add-task-form">
    <input @bind="newTaskText" placeholder="Zadejte název úkolu" @onkeypress="HandleKeyPress" />
    <select @bind="selectedType">
        <option value="ToDo">Todo</option>
        <option value="InProgress">In Progress</option>
        <option value="Done">Done</option>
    </select>
    <Button_2 OnClick="AddTask" Type="secondary">Přidat úkol</Button_2>
</div>

@code {
    [Parameter]
    public EventCallback<TaskModel> OnTaskAdded { get; set; }

    private string newTaskText = string.Empty; // Text nového úkolu
    private TaskType selectedType = TaskType.ToDo; // Výchozí typ úkolu

    private async Task AddTask()
    {
        if (!string.IsNullOrWhiteSpace(newTaskText))
        {
            // Vytvoříme nový úkol
            var newTask = new TaskModel
            {
                Text = newTaskText,
                Type = selectedType
            };

            // Zavoláme rodičovskou komponentu a předáme jí nový úkol
            await OnTaskAdded.InvokeAsync(newTask);

            // Vyčistíme formulář
            newTaskText = string.Empty;
            selectedType = TaskType.ToDo;
        }
    }

    private async Task HandleKeyPress(KeyboardEventArgs e)
    {
        if (e.Key == "Enter")
        {
            await AddTask();
        }
    }
}